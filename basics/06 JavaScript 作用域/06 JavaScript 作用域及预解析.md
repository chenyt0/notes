## 函数进阶

###核心知识点

##### 01.作用域    

​	变量可访问的范围

#####02.预解析

变量声明以及函数声明提升

#### 01.全局作用域

- 什么全局作用域

  > 函数之外的执行环境。

- 全局变量

  > **在全局作用域中用var关键字创建的变量**
  >
  > 访问范围：程序的任何地方

```
不使用var声明的变量是全局变量，不推荐使用。
变量退出作用域之后会销毁，全局变量关闭网页或浏览器才会销毁
```



##### 案例：说出下列代码的运行结果？

```
var age = 18;  // 全局变量
console.log(age); //?

function fn(){
 console.log(age)
}

fn();//?
```

#### 02.局部作用域

- 什么是局部作用域

  > 函数体内的执行环境

- 局部变量

  > **函数定义的形参**      以及     在 **函数体中用var关键字定义的变量**

##### 案例：说出下列代码的运行结果？

```
function fn(a){  // 形参a可以看做为函数体内的一个局部变量
 a = 100;
 var b = 200;  //局部变量
}
console.log(a); //? 报错
console.log(b); //? 报错
```

#### 03.作用域链

**当访问一个变量时，会先从本作用域中去找这个变量，若找不到则向上一级作用域中去找，依次类推，就形成了一个作用域链**

![](F:\就业班\01 JavaScript 基础\JavaScript基础 笔记\06 JavaScript 作用域\images\作用域链.png)



#### 04.预解析

什么是预解析

> 程序准备→执行。程序在**执行之前，有个预备过程**。 预备过程要做的事就是**预解析**。预备过程要做两件事，分别是： 
>
> - 把用 **var关键字**所声明的变量名（ **仅仅是变量名**），提升到当前执行环境（作用域）的顶部。
> - 把用 **函数声明**所创建的函数（ **函数整体**），提升到当前执行环境（作用域）的顶部。



#### 05.arguments的使用

aruments，**函数体内**提供的一个伪**数组**。aruments中存放了所有的实参。

> JavaScript中，arguments对象是比较特别的一个对象，实际上是当前函数的一个内置属性。也就是说所有函数都内置了一个arguments对象，arguments对象中存储了传递的所有的实参。arguments是一个伪数组，因此及可以进行遍历

![](F:\就业班\01 JavaScript 基础\JavaScript基础 笔记\06 JavaScript 作用域\images\伪数组 arguments.jpg)

```
function 函数名(){
  //arguments.length;  参数的个数
  //arguments[索引];   //获取一个实参
  
}
```



####  06.函数创建方式2

- 函数声明

  ```javascript
  function 函数名() {     
   // 函数体 
  }
  ```

- 函数表达式

  ```javascript
  var 变量名 = function() {
    //函数体
  }
  ```

- 函数声明 和 函数表达式的区别？

  ```javascript
  fn(); // ?  答案：打印1
  function fn () {
    alert('1');
  }
  ```

  ​

  ```javascript
  fn(); // ?  报错 不是一个函数
  var fn = function() {
    alert('你好');
  }
  ```

#### 07.匿名函数 和 自调用函数（了解）

函数也是一种数据类型。属于引用数据类型（Function）

匿名函数就是 **没有名字的函数**。在js中匿名函数需要 **配合运算符**使用。

匿名函数不能通过直接调用来执行，因此可以通过匿名函数的自调用的方式来执行

函数表达式

```
var 变量名 = function() {
  //函数体;
}；
```

自调用函数

自执行函数就是匿名函数 **创建后马上调用执行**。

优点：可以避免全局变量污染

```
//匿名函数 【常用的方式】 
(function(){
  //函数体
})();

//匿名函数 【常用的方式】
(function(形参,形参){
  //函数体
})();
```

```
		//自调用函数,避免全局污染
        //只执行一次
        // (function () {
        //     console.log(123);
        // })();
```



#### 08函数作为函数的参数（了解）

回顾函数的参数

> - 形参，函数定义时的标识符。
> - 实参，函数调用时传入的实际的数据。
> - 函数也是一种数据类型，类型是 Function

```
function fn(f){
  f();
}

fn(function(){
  alert('执行');
});
```

![](F:\就业班\01 JavaScript 基础\JavaScript基础 笔记\06 JavaScript 作用域\images\函数作为函数的参数.jpg)

小结：本质归根结底是还是形参和实参的关系。 无非是把一个函数当做实参传递给了一个形参**

#### 09.函数内部的执行过程

![](F:\就业班\01 JavaScript 基础\JavaScript基础 笔记\06 JavaScript 作用域\images\函数内部调用执行过程.jpg)

#### 10.全局变量的特殊情况【仅了解】

```
function fn() {
  a = 123;
}
fn();
alert(a); // ?
```

